---
common:
  autoUpdate: 3000
dashboards:
  -
    title: Kaa Web Dashboard
    displayTitle: false
    description: Welcome to Kaa Web Dashboard!
    displayDescription: false
    path: /
    isTopLevel: false
    widgets:
      - height: 500
        percentWidth: 100
        config:
          content: null
          type: rawHTML
          transparent: true
  -
    title: "Smart energy meter"
    description: "Smart energy meter solution"
    displayTitle: true
    displayDescription: true
    icons:
      default: router/grey.svg
      hover: router/hovered.svg
      selected: router/orange.svg
    isTopLevel: true
    path: /meter
    widgets:
      -
        height: 500
        percentWidth: 100
        config:
          title: Smart meters
          type: epList
          displayTitle: true
          applicationName: smart_energy
          service: API_EPR
          generate: true
          generateTitle: Generate new
          generateTimeout: 1000
          baseUrl: api/v1
          height: 500
          columns:
            -
              display: UID
              path: metadata.uid
            -
              display: token
              path: metadata.token
            -
              display: HW version
              path: metadata.hwvr
            -
              display: FW version
              path: metadata.swvr
            -
              display: ID
              path: endpointId
            -
              display: Created
              path: createdDate
          itemLink:
            path: "/meter/{meter_id}"
            parameters:
                itemJsonPath: "widgetConfig.columns[4].display"
                name: meter_id
          metadata: metadata

  -
    title: Smart meter
    displayTitle: true
    displayDescription: true
    icons:
      default: router/grey.svg
      hover: router/hovered.svg
      selected: router/orange.svg
    isTopLevel: false
    path: "/meter/:id"
    widgets:
      -
        height: 500
        percentWidth: 30
        config:
          title: Metadata
          type: metadata
          allFields: false
          service: API_EPR
          baseUrl: api/v1
          fields:
            - name: uid
              displayName: Device UID
              dataType: string
              section: metadata
            - name: token
              displayName: Endpoint token
              dataType: string
              section: metadata
            - name: hwvr
              displayName: HW version
              dataType: string
              section: metadata
            - name: swvr
              displayName: FW version
              dataType: string
              section: metadata
            - name: ct
              displayName: Current transformer ratio
              dataType: number
              section: metadata
            - name: pt
              displayName: Voltage transformer ratio
              dataType: number
              section: metadata
            - name: measmode
              displayName: Wiring mode
              dataType: string
              section: metadata
      -
        height: 500
        percentWidth: 70
        config:
          title: "Active Power"
          baseUrl: api/v1
          displayTitle: true
          limit: 1000
          service: API_EPTS
          type: multiSeriesChart
          dataSource:
            showLast: 200
            timeSeries:
              name: ActivePower
            endpoints: '${dashboard.id}'
      -
        height: 500
        percentWidth: 100
        config:
          title: "Accumulated Active Energy"
          baseUrl: api/v1
          displayTitle: true
          limit: 1000
          service: API_EPTS
          type: multiSeriesChart
          dataSource:
            showLast: 15552000 # six month = 6*30*24*60*60
            timeSeries:
              name: AccumulatedActiveEnergy
            endpoints: '${dashboard.id}'
      -
        config:
          baseUrl: api/v1
          dataPath: value
          displayPostfix: rpm
          displayScale: 0
          displayTitle: true
          emptyQueriesMax: 3
          ranges:
            highCritical: 5000
            highWarning: 5000
            lowCritical: 2000
            lowWarning: 2000
            max: 5000
            min: 2000
            step: 500
          service: API_EPTS
          type: gauge
          timeSegment: 5
          timeSeriesName: TotalAccumulatedActiveEnergy
          timeSeriesParams:
            -
              itemJsonPath: dashboardRouteParams.id
              name: endpointId
          title: "Total accumulated active energy"
          skin: RadialModernBorder270
          updateInterval: 0.5
        height: 500
        percentWidth: 33.33

  - title: Kaa Web Dashboard
    displayTitle: false
    description: Welcome to Kaa Web Dashboard!
    displayDescription: false
    path: /
    isTopLevel: false
    widgets:
      - height: 500
        percentWidth: 100
        type: rawHTML
        config:
          content: null
          type: rawHTML
          transparent: true
info:
  logo: "http://some_path"
  theme: night
  title: MyCompany
